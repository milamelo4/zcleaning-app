<div class="d-flex min-vh-100">
    <%- include("../../partials/sidebar") %>
  
    <div class="flex-grow-1 px-3 py-4" style="min-width: 0;">
      <h1><%= title %></h1> 
  
      <% if (missingPayments && missingPayments.length > 0) { %>
        <div class="d-flex justify-content-end no-print">
          <button class="btn btn-primary mb-3"
            onclick="window.print()">Print</button>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-striped align-middle">
            <thead class="table-danger">
              <tr>
                <th>Client</th>
                <th>Payment Type</th>
                <th>Schedule</th>
                <th>Due Date</th>
                <th>Expected</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <% missingPayments.forEach(p => { %>
                <tr>
                  <td><%= p.first_name %> <%= p.last_name %></td>
                  <td><%= p.payment_type %></td>
                  <td><%= p.payment_schedule %></td>
                  <td><%= p.due_date ? new Date(p.due_date).toLocaleDateString() : "—" %></td>
                  <td><%= p.expected_received_date ? new Date(p.expected_received_date).toLocaleDateString() : "—" %></td>
                  <td>$<%= p.price ? Number(p.price).toFixed(2) : "0.00" %></td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      <% } else { %>
        <p>No missing payments found.</p>
      <% } %>
      <div class="no-print d-flex flex-column align-items-center">        
        <a href="/dashboard" class="btn btn-outline-secondary mt-4">← Back to Dashboard</a>
      </div>      
    </div>
  </div>
  