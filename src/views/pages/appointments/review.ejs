<div class="d-flex min-vh-100">
    <%- include("../../partials/sidebar") %>
  
    <div class="flex-grow-1 p-4">
      <h1><%= title %></h1>
      <p class="text-muted">View, edit, or delete appointments already saved in the
        system.</p>
      <div class="mb-3">
        <form id="postScheduleForm" data-appointments='<%- appointmentsJson %>'
        action="/appointments/save-suggested" method="POST" >
          <input type="hidden" name="appointments" id="appointmentsInput">

          <div class="d-flex gap-3 align-items-end mb-3">
            <div>
              <label for="searchInput" class="form-label">Search Client</label>
              <input type="text" class="form-control" placeholder="Search client name..."
                id="searchInput">
            </div>
            <div>
              <label for="dateInput" class="form-label">Filter by Date</label>
              <input type="date" id="dateInput" class="form-control" />
            </div>
          </div>
      </div>
          
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <th>Client</th>
              <th>Date</th>
              <th>Hours</th>
              <th>Price ($)</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody class="table-info">
            <% appointments.forEach((appt, i) => { %>
              <tr>
                <td><%= appt.first_name %> <%= appt.last_name %></td>
                <td>
                  <%= appt.appointment_date %>
                </td>

                <td><%= appt.duration_hours %></td>
                <td>
                  <input type="number" step="0.01" class="form-control price-input" data-index="<%= i %>" value="<%= appt.price || '' %>">
                </td>
                <td>
                  <input type="text" class="form-control notes-input" data-index="<%= i %>" value="<%= appt.notes || '' %>">
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
    
        <button type="submit" class="btn btn-success mt-3"><i class="bi bi-check-circle me-2"></i>Post Final Schedule</button>
      </form>

</div>
<script src="/js/appointments-review.js"></script>