<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>

<body>
  <div class="bg-checker">
    <div id="wrapper">
      <%- include('../partials/header') %>
      <%- include('../partials/navigation') %>
    </div>

    <main>
      <% if (typeof errors === 'undefined' && (messages.success_msg || messages.error_msg)) { %>
        <div class="container mt-3">
          <div class="row justify-content-center">
            <div class="col-md-5">
              <% if (messages.success_msg) { %>
                <div class="alert alert-success text-center auto-dismiss">
                  <%= messages.success_msg %>
                </div>
              <% } %>
              <% if (messages.error_msg) { %>
                <div class="alert alert-danger text-center auto-dismiss">
                  <%= messages.error_msg %>
                </div>
              <% } %>
            </div>
          </div>
        </div>
      <% } %>

      <%- body %>

      <!-- Offcanvas Mobile Sidebar -->
      <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileSidebar" aria-labelledby="mobileSidebarLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="mobileSidebarLabel">ZCleaning</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="nav flex-column">
            <li class="nav-item"><a href="/dashboard" class="nav-link"><i class="bi bi-house me-2"></i> Dashboard</a></li>
            <li class="nav-item"><a href="/clients/list-clients" class="nav-link"><i class="bi bi-people me-2"></i> Clients</a></li>
            <li class="nav-item"><a href="/appointments" class="nav-link"><i class="bi bi-calendar2 me-2"></i> Appointments</a></li>
            <li class="nav-item"><a href="/clients/missing-payments" class="nav-link"><i class="bi bi-cash-stack me-2"></i> Payments</a></li>
            <li class="nav-item"><a href="/admin/promote" class="nav-link"><i class="bi bi-person-gear me-2"></i> Approve Users</a></li>
            <li class="nav-item mt-4"><a href="/logout" class="nav-link text-danger"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
          </ul>
        </div>
      </div>

    </main>
    <%- include('../partials/footer') %>
  </div>

  <script>
    setTimeout(() => {
      const alerts = document.querySelectorAll('.alert.auto-dismiss');
      alerts.forEach((alert) => {
        alert.classList.add('fade');
        alert.classList.remove('show');
        setTimeout(() => alert.remove(), 300);
      });
    }, 3000);
  </script>

  <script src="/js/main.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
